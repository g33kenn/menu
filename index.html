<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dish Dash: Database & Menu Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
            color: #f3f4f6;
        }
        .tag {
            display: inline-flex;
            align-items: center;
            padding: 4px 10px;
            border-radius: 9999px;
            font-weight: 500;
            margin: 2px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .tag-protein { background-color: #ef4444; color: white; }
        .tag-side { background-color: #f59e0b; color: #111827; }
        .tag-veggie { background-color: #22c55e; color: white; }
        .tag-remove {
            margin-left: 8px;
            font-weight: bold;
            opacity: 0.7;
        }
        .tag-remove:hover {
            opacity: 1;
        }
        .tag-selected {
            box-shadow: 0 0 0 3px #3b82f6;
        }
        .nav-button {
            padding: 8px 16px;
            border-radius: 8px;
            transition: background-color 0.2s;
        }
        .nav-button.active {
            background-color: #374151;
        }
        .nav-button:not(.active):hover {
            background-color: #1f2937;
        }
        .autocomplete-suggestions {
            position: absolute;
            border: 1px solid #4b5563;
            background-color: #1f2937;
            z-index: 99;
            max-height: 150px;
            overflow-y: auto;
            border-radius: 8px;
            margin-top: 4px;
        }
        .autocomplete-suggestion {
            padding: 8px 12px;
            cursor: pointer;
        }
        .autocomplete-suggestion:hover {
            background-color: #374151;
        }
        /* Custom scrollbar for webkit browsers */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #1f2937;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
        /* Hide spinner from number input */
        input[type='number']::-webkit-inner-spin-button,
        input[type='number']::-webkit-outer-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        input[type='number'] {
          -moz-appearance: textfield;
        }
    </style>
</head>
<body class="antialiased">

    <div id="app" class="min-h-screen flex flex-col p-4 md:p-8">
        <!-- Header -->
        <header class="flex justify-between items-center mb-6">
            <div class="flex items-center space-x-2">
                <svg class="w-8 h-8 text-indigo-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z" />
                </svg>
                <h1 class="text-2xl font-bold text-gray-100">Dish Dash</h1>
                <nav class="ml-6 bg-gray-800 rounded-lg p-1 flex space-x-1">
                    <button id="nav-database" class="nav-button active">Database</button>
                    <button id="nav-menu" class="nav-button">Menu</button>
                </nav>
            </div>
            <button id="auth-button" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors">
                Connect with Google
            </button>
        </header>

        <main class="flex-grow">
            <!-- Database Page -->
            <div id="page-database">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Dish Creation Form -->
                    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
                        <h2 id="form-title" class="text-xl font-semibold mb-4">Create a New Dish</h2>
                        <form id="dish-form" class="space-y-4">
                            <div>
                                <label for="dish-name" class="block text-sm font-medium text-gray-300">Name of the Dish</label>
                                <input type="text" id="dish-name" class="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required>
                            </div>
                            <!-- Ingredient Inputs -->
                            <div class="relative">
                                <label for="protein-input" class="block text-sm font-medium text-gray-300">Protein</label>
                                <input type="text" id="protein-input" data-category="protein" class="ingredient-input mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-red-500 focus:border-red-500" placeholder="Type and press Enter">
                                <div id="protein-tags" class="mt-2 min-h-[36px]"></div>
                            </div>
                            <div class="relative">
                                <label for="side-input" class="block text-sm font-medium text-gray-300">Side</label>
                                <input type="text" id="side-input" data-category="side" class="ingredient-input mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-yellow-500 focus:border-yellow-500" placeholder="Type and press Enter">
                                <div id="side-tags" class="mt-2 min-h-[36px]"></div>
                            </div>
                            <div class="relative">
                                <label for="veggie-input" class="block text-sm font-medium text-gray-300">Veggie</label>
                                <input type="text" id="veggie-input" data-category="veggie" class="ingredient-input mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-green-500 focus:border-green-500" placeholder="Type and press Enter">
                                <div id="veggie-tags" class="mt-2 min-h-[36px]"></div>
                            </div>
                            <div class="flex space-x-2">
                                <button type="submit" id="save-dish-button" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors">Save Dish</button>
                                <button type="button" id="cancel-edit-button" class="w-full hidden bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors">Cancel</button>
                            </div>
                        </form>
                    </div>

                    <!-- Dish List -->
                    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
                        <h2 class="text-xl font-semibold mb-4">My Dishes</h2>
                        <div id="dish-list" class="space-y-3 max-h-[65vh] overflow-y-auto custom-scrollbar pr-2">
                           <!-- Dishes will be dynamically inserted here -->
                           <p id="no-dishes-msg" class="text-gray-400">No dishes created yet. Add one to get started!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Menu Page -->
            <div id="page-menu" class="hidden">
                 <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Ingredient Filters -->
                    <div class="lg:col-span-1 bg-gray-800 p-6 rounded-lg shadow-lg h-fit">
                        <h2 class="text-xl font-semibold mb-4">Available Ingredients</h2>
                        <div id="ingredient-filters" class="space-y-4">
                            <div>
                                <h3 class="font-semibold text-red-400">Protein</h3>
                                <div id="filter-protein" class="flex flex-wrap gap-2 mt-2"></div>
                            </div>
                             <div>
                                <h3 class="font-semibold text-yellow-400">Side</h3>
                                <div id="filter-side" class="flex flex-wrap gap-2 mt-2"></div>
                            </div>
                             <div>
                                <h3 class="font-semibold text-green-400">Veggie</h3>
                                <div id="filter-veggie" class="flex flex-wrap gap-2 mt-2"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Available Dishes -->
                    <div class="lg:col-span-2 bg-gray-800 p-6 rounded-lg shadow-lg">
                        <h2 class="text-xl font-semibold mb-4">What you can cook</h2>
                        <div id="menu-dish-list" class="space-y-2 max-h-[70vh] overflow-y-auto custom-scrollbar pr-2">
                            <!-- Filtered dishes will appear here -->
                             <p id="no-menu-msg" class="text-gray-400">Select ingredients to see what you can cook!</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Toast Notification -->
        <div id="toast" class="fixed bottom-5 right-5 bg-green-600 text-white py-2 px-5 rounded-lg shadow-xl text-sm font-semibold opacity-0 transform translate-y-10 transition-all duration-300">
            <p id="toast-message">Success!</p>
        </div>
    </div>

    <script type="module">
        // Firebase Imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, doc, addDoc, setDoc, deleteDoc, onSnapshot, query, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyCIVdjx95c7v-40t0TmhqWm3467F1BAkHg",
          authDomain: "menu-cf506.firebaseapp.com",
          projectId: "menu-cf506",
          storageBucket: "menu-cf506.firebasestorage.app",
          messagingSenderId: "568101794661",
          appId: "1:568101794661:web:293d9c6cff80ea6e5d678c"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        setLogLevel('debug');

        // App state
        let currentUser = null;
        let dishesUnsubscribe = null;
        let dishes = [];
        let editingDishId = null;
        let allIngredients = { protein: new Set(), side: new Set(), veggie: new Set() };
        let selectedIngredients = { protein: new Set(), side: new Set(), veggie: new Set() };
        let currentIngredients = { protein: [], side: [], veggie: [] };
        
        // DOM Elements
        const authButton = document.getElementById('auth-button');
        const navDatabase = document.getElementById('nav-database');
        const navMenu = document.getElementById('nav-menu');
        const pageDatabase = document.getElementById('page-database');
        const pageMenu = document.getElementById('page-menu');
        const dishForm = document.getElementById('dish-form');
        const formTitle = document.getElementById('form-title');
        const dishNameInput = document.getElementById('dish-name');
        const saveDishButton = document.getElementById('save-dish-button');
        const cancelEditButton = document.getElementById('cancel-edit-button');
        const dishListContainer = document.getElementById('dish-list');
        const menuDishListContainer = document.getElementById('menu-dish-list');
        const ingredientInputs = document.querySelectorAll('.ingredient-input');
        
        // --- AUTHENTICATION ---
        onAuthStateChanged(auth, (user) => {
            currentUser = user;
            if (user) {
                authButton.textContent = 'Sign Out';
                fetchDishes();
            } else {
                authButton.textContent = 'Connect with Google';
                if (dishesUnsubscribe) dishesUnsubscribe();
                dishes = [];
                renderAll();
                showToast("Demo mode. Connect with Google to save your dishes.", "info", 5000);
            }
        });

        authButton.addEventListener('click', () => {
            if (currentUser) {
                signOut(auth);
            } else {
                const provider = new GoogleAuthProvider();
                signInWithPopup(auth, provider).catch(error => console.error("Auth Error:", error));
            }
        });
        
        // --- NAVIGATION ---
        function switchPage(page) {
            if (page === 'database') {
                pageDatabase.classList.remove('hidden');
                pageMenu.classList.add('hidden');
                navDatabase.classList.add('active');
                navMenu.classList.remove('active');
            } else {
                pageDatabase.classList.add('hidden');
                pageMenu.classList.remove('hidden');
                navDatabase.classList.remove('active');
                navMenu.classList.add('active');
                renderMenuPage(); // Re-render menu page on switch to reflect latest data
            }
        }
        navDatabase.addEventListener('click', () => switchPage('database'));
        navMenu.addEventListener('click', () => switchPage('menu'));

        // --- DATA HANDLING ---
        function fetchDishes() {
            if (!currentUser) return;
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            const dishesRef = collection(db, 'artifacts', appId, 'users', currentUser.uid, 'dishes');
            
            dishesUnsubscribe = onSnapshot(dishesRef, (snapshot) => {
                dishes = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                calculateAllIngredients();
                renderAll();
            }, error => {
                console.error("Error fetching dishes:", error);
                showToast("Could not fetch dishes.", "error");
            });
        }
        
        function calculateAllIngredients() {
            allIngredients = { protein: new Set(), side: new Set(), veggie: new Set() };
            dishes.forEach(dish => {
                dish.protein?.forEach(item => allIngredients.protein.add(item));
                dish.side?.forEach(item => allIngredients.side.add(item));
                dish.veggie?.forEach(item => allIngredients.veggie.add(item));
            });
        }
        
        function renderAll() {
            renderDatabasePage();
            renderMenuPage();
        }

        // --- DATABASE PAGE ---
        function renderDatabasePage() {
            dishListContainer.innerHTML = '';
            if (dishes.length === 0) {
                 dishListContainer.innerHTML = `<p id="no-dishes-msg" class="text-gray-400">No dishes created yet. Add one to get started!</p>`;
                 return;
            }

            dishes.forEach(dish => {
                const dishEl = document.createElement('div');
                dishEl.className = 'bg-gray-700 p-3 rounded-lg flex justify-between items-center';
                dishEl.innerHTML = `
                    <div>
                        <p class="font-semibold text-white">${dish.name}</p>
                        <div class="flex flex-wrap mt-1">
                            ${dish.protein.map(p => `<span class="tag tag-protein text-xs">${p}</span>`).join('')}
                            ${dish.side.map(s => `<span class="tag tag-side text-xs">${s}</span>`).join('')}
                            ${dish.veggie.map(v => `<span class="tag tag-veggie text-xs">${v}</span>`).join('')}
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <button class="edit-btn p-2 rounded-md hover:bg-gray-600" data-id="${dish.id}">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828zM5 12V7a2 2 0 012-2h2.586l-4.293 4.293A2 2 0 015 12zM3 15a2 2 0 012-2h10a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2z"></path></svg>
                        </button>
                        <button class="delete-btn p-2 rounded-md hover:bg-gray-600 text-red-400" data-id="${dish.id}">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z" clip-rule="evenodd"></path></svg>
                        </button>
                    </div>
                `;
                dishEl.querySelector('.edit-btn').addEventListener('click', () => handleEdit(dish.id));
                dishEl.querySelector('.delete-btn').addEventListener('click', () => handleDelete(dish.id));
                dishListContainer.appendChild(dishEl);
            });
        }
        
        // --- MENU PAGE ---
        function renderMenuPage() {
            renderFilterTags();
            renderFilteredDishes();
        }

        function renderFilterTags() {
            const categories = ['protein', 'side', 'veggie'];
            categories.forEach(category => {
                const container = document.getElementById(`filter-${category}`);
                container.innerHTML = '';
                const sortedIngredients = Array.from(allIngredients[category]).sort();
                sortedIngredients.forEach(ingredient => {
                    const tag = createTag(ingredient, category, false);
                    if (selectedIngredients[category].has(ingredient)) {
                        tag.classList.add('tag-selected');
                    }
                    tag.addEventListener('click', () => {
                        tag.classList.toggle('tag-selected');
                        if (selectedIngredients[category].has(ingredient)) {
                            selectedIngredients[category].delete(ingredient);
                        } else {
                            selectedIngredients[category].add(ingredient);
                        }
                        renderFilteredDishes();
                    });
                    container.appendChild(tag);
                });
            });
        }

        function renderFilteredDishes() {
            menuDishListContainer.innerHTML = '';
            const selectedProtein = Array.from(selectedIngredients.protein);
            const selectedSide = Array.from(selectedIngredients.side);
            const selectedVeggie = Array.from(selectedIngredients.veggie);

            const hasSelection = selectedProtein.length > 0 || selectedSide.length > 0 || selectedVeggie.length > 0;
            
            const filtered = dishes.filter(dish => {
                if (!hasSelection) return true; // Show all if nothing is selected
                
                const hasAllProtein = selectedProtein.every(p => dish.protein.includes(p));
                const hasAllSide = selectedSide.every(s => dish.side.includes(s));
                const hasAllVeggie = selectedVeggie.every(v => dish.veggie.includes(v));
                
                return hasAllProtein && hasAllSide && hasAllVeggie;
            });
            
            if (filtered.length === 0) {
                 menuDishListContainer.innerHTML = `<p id="no-menu-msg" class="text-gray-400">${hasSelection ? 'No dishes match your selection.' : 'Select ingredients to see what you can cook!'}</p>`;
                return;
            }

            filtered.forEach(dish => {
                const dishEl = document.createElement('div');
                dishEl.className = 'bg-gray-700 p-3 rounded-lg';
                dishEl.innerHTML = `
                    <p class="font-semibold text-white">${dish.name}</p>
                    <div class="flex flex-wrap mt-1">
                        ${dish.protein.map(p => `<span class="tag tag-protein text-xs ${selectedIngredients.protein.has(p) ? 'font-bold' : ''}">${p}</span>`).join('')}
                        ${dish.side.map(s => `<span class="tag tag-side text-xs ${selectedIngredients.side.has(s) ? 'font-bold' : ''}">${s}</span>`).join('')}
                        ${dish.veggie.map(v => `<span class="tag tag-veggie text-xs ${selectedIngredients.veggie.has(v) ? 'font-bold' : ''}">${v}</span>`).join('')}
                    </div>
                `;
                menuDishListContainer.appendChild(dishEl);
            });
        }

        // --- FORM HANDLING & TAGS ---
        
        // Ingredient Input Handlers
        ingredientInputs.forEach(input => {
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const value = input.value.trim();
                    const category = input.dataset.category;
                    if (value && !currentIngredients[category].includes(value)) {
                        currentIngredients[category].push(value);
                        renderCurrentIngredients();
                    }
                    input.value = '';
                    hideAutocomplete(input);
                }
            });

            input.addEventListener('input', () => showAutocomplete(input));
            input.addEventListener('blur', () => setTimeout(() => hideAutocomplete(input), 150));
        });

        function showAutocomplete(input) {
            hideAutocomplete(input);
            const value = input.value.toLowerCase();
            const category = input.dataset.category;
            if (value.length === 0) return;

            const suggestions = Array.from(allIngredients[category]).filter(item =>
                item.toLowerCase().includes(value) && !currentIngredients[category].includes(item)
            );

            if (suggestions.length > 0) {
                const suggestionsContainer = document.createElement('div');
                suggestionsContainer.className = 'autocomplete-suggestions';
                suggestions.forEach(suggestion => {
                    const item = document.createElement('div');
                    item.className = 'autocomplete-suggestion';
                    item.textContent = suggestion;
                    item.onclick = () => {
                        if (!currentIngredients[category].includes(suggestion)) {
                            currentIngredients[category].push(suggestion);
                            renderCurrentIngredients();
                        }
                        input.value = '';
                        hideAutocomplete(input);
                        input.focus();
                    };
                    suggestionsContainer.appendChild(item);
                });
                input.parentNode.appendChild(suggestionsContainer);
            }
        }
        
        function hideAutocomplete(input) {
            const existing = input.parentNode.querySelector('.autocomplete-suggestions');
            if (existing) existing.remove();
        }

        function renderCurrentIngredients() {
            Object.keys(currentIngredients).forEach(category => {
                const container = document.getElementById(`${category}-tags`);
                container.innerHTML = '';
                currentIngredients[category].forEach(ingredient => {
                    const tag = createTag(ingredient, category, true);
                    tag.addEventListener('click', () => {
                        currentIngredients[category] = currentIngredients[category].filter(i => i !== ingredient);
                        renderCurrentIngredients();
                    });
                    container.appendChild(tag);
                });
            });
        }

        function createTag(text, category, withRemove) {
            const tag = document.createElement('span');
            tag.className = `tag tag-${category}`;
            tag.textContent = text;
            if (withRemove) {
                const removeEl = document.createElement('span');
                removeEl.className = 'tag-remove';
                removeEl.innerHTML = '&times;';
                tag.appendChild(removeEl);
            }
            return tag;
        }

        function resetForm() {
            dishForm.reset();
            currentIngredients = { protein: [], side: [], veggie: [] };
            renderCurrentIngredients();
            editingDishId = null;
            formTitle.textContent = 'Create a New Dish';
            saveDishButton.textContent = 'Save Dish';
            cancelEditButton.classList.add('hidden');
        }

        cancelEditButton.addEventListener('click', resetForm);
        
        dishForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            if (!currentUser) {
                showToast("Please connect with Google to save dishes.", "error");
                return;
            }

            const dishData = {
                name: dishNameInput.value.trim(),
                protein: currentIngredients.protein,
                side: currentIngredients.side,
                veggie: currentIngredients.veggie,
            };

            if (!dishData.name) {
                showToast("Dish name cannot be empty.", "error");
                return;
            }
            
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            
            try {
                if (editingDishId) {
                    const dishRef = doc(db, 'artifacts', appId, 'users', currentUser.uid, 'dishes', editingDishId);
                    await setDoc(dishRef, dishData);
                    showToast("Dish updated successfully!");
                } else {
                    const dishesRef = collection(db, 'artifacts', appId, 'users', currentUser.uid, 'dishes');
                    await addDoc(dishesRef, dishData);
                    showToast("Dish saved successfully!");
                }
                resetForm();
            } catch (error) {
                console.error("Error saving dish:", error);
                showToast("Failed to save dish.", "error");
            }
        });

        function handleEdit(id) {
            const dish = dishes.find(d => d.id === id);
            if (dish) {
                editingDishId = id;
                dishNameInput.value = dish.name;
                currentIngredients = {
                    protein: [...dish.protein],
                    side: [...dish.side],
                    veggie: [...dish.veggie],
                };
                renderCurrentIngredients();
                formTitle.textContent = 'Edit Dish';
                saveDishButton.textContent = 'Update Dish';
                cancelEditButton.classList.remove('hidden');
                window.scrollTo(0, 0);
            }
        }
        
        async function handleDelete(id) {
            if (!currentUser || !confirm("Are you sure you want to delete this dish?")) return;
            try {
                const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
                const dishRef = doc(db, 'artifacts', appId, 'users', currentUser.uid, 'dishes', id);
                await deleteDoc(dishRef);
                showToast("Dish deleted.");
                if (editingDishId === id) {
                    resetForm();
                }
            } catch(error) {
                console.error("Error deleting dish:", error);
                showToast("Failed to delete dish.", "error");
            }
        }
        
        // --- UI UTILS ---
        function showToast(message, type = 'success', duration = 3000) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');

            toast.classList.remove('bg-green-600', 'bg-red-600', 'bg-blue-600');
            if (type === 'error') {
                toast.classList.add('bg-red-600');
            } else if (type === 'info') {
                 toast.classList.add('bg-blue-600');
            } else {
                toast.classList.add('bg-green-600');
            }
            
            toastMessage.textContent = message;
            toast.classList.remove('opacity-0', 'translate-y-10');
            
            setTimeout(() => {
                toast.classList.add('opacity-0', 'translate-y-10');
            }, duration);
        }
        
        // Initial load
        switchPage('database');

    </script>
</body>
</html>
